<!DOCTYPE html>
<html>
<head>
    <title>tetris</title>
    <meta charset = "UTF-8" name="viewport" content="width=device-width, initial-scale=0.6, user-scalable=no">
    <link rel="stylesheet" href="stil.css">
</head>

<body>
    <div id = "header">
        <p>Tetris</p>
    </div>
    <div id = "kontejner">
        
        <div id = "sredina">

            <div id = "tabla">
                <div id = "1-1" class = "ivicno_polje"></div>
                <div id = "1-2" class = "ivicno_polje"></div>
                <div id = "1-3" class = "ivicno_polje"></div>
                <div id = "1-4" class = "ivicno_polje"></div>
                <div id = "1-5" class = "ivicno_polje"></div>
                <div id = "1-6" class = "ivicno_polje"></div>
                <div id = "1-7" class = "ivicno_polje"></div>
                <div id = "1-8" class = "ivicno_polje"></div>
                <div id = "1-9" class = "ivicno_polje"></div>
                <div id = "1-10" class = "ivicno_polje"></div>
                <div id = "1-11" class = "ivicno_polje"></div>
                <div id = "1-12" class = "ivicno_polje"></div>
                <div id = "1-13" class = "ivicno_polje"></div>
                <div id = "1-14" class = "ivicno_polje"></div>
                <div id = "1-15" class = "ivicno_polje"></div>
                <div id = "1-16" class = "ivicno_polje"></div>
                <div id = "1-17" class = "ivicno_polje"></div>
                <div id = "1-18" class = "ivicno_polje"></div>
                <div id = "1-19" class = "ivicno_polje"></div>
                <div id = "1-20" class = "ivicno_polje"></div>
                <div id = "1-21" class = "ivicno_polje"></div>
                <div id = "2-1" class = "ivicno_polje"></div>
                <div id = "2-2" class = "ivicno_polje"></div>
                <div id = "2-3" class = "ivicno_polje"></div>
                <div id = "2-4" class = "ivicno_polje"></div>
                <div id = "2-5" class = "ivicno_polje"></div>
                <div id = "2-6" class = "ivicno_polje"></div>
                <div id = "2-7" class = "ivicno_polje"></div>
                <div id = "2-8" class = "ivicno_polje"></div>
                <div id = "2-9" class = "ivicno_polje"></div>
                <div id = "2-10" class = "ivicno_polje"></div>
                <div id = "2-11" class = "ivicno_polje"></div>
                <div id = "2-12" class = "ivicno_polje"></div>
                <div id = "2-13" class = "ivicno_polje"></div>
                <div id = "2-14" class = "ivicno_polje"></div>
                <div id = "2-15" class = "ivicno_polje"></div>
                <div id = "2-16" class = "ivicno_polje"></div>
                <div id = "2-17" class = "ivicno_polje"></div>
                <div id = "2-18" class = "ivicno_polje"></div>
                <div id = "2-19" class = "ivicno_polje"></div>
                <div id = "2-20" class = "ivicno_polje"></div>
                <div id = "2-21" class = "ivicno_polje"></div>
                <div id = "3-1" class = "polje"></div>
                <div id = "3-2" class = "polje"></div>
                <div id = "3-3" class = "polje"></div>
                <div id = "3-4" class = "polje"></div>
                <div id = "3-5" class = "polje"></div>
                <div id = "3-6" class = "polje"></div>
                <div id = "3-7" class = "polje"></div>
                <div id = "3-8" class = "polje"></div>
                <div id = "3-9" class = "polje"></div>
                <div id = "3-10" class = "polje"></div>
                <div id = "3-11" class = "polje"></div>
                <div id = "3-12" class = "polje"></div>
                <div id = "3-13" class = "polje"></div>
                <div id = "3-14" class = "polje"></div>
                <div id = "3-15" class = "polje"></div>
                <div id = "3-16" class = "polje"></div>
                <div id = "3-17" class = "polje"></div>
                <div id = "3-18" class = "polje"></div>
                <div id = "3-19" class = "polje"></div>
                <div id = "3-20" class = "polje"></div>
                <div id = "3-21" class = "ivicno_polje"></div>
                <div id = "4-1" class = "polje"></div>
                <div id = "4-2" class = "polje"></div>
                <div id = "4-3" class = "polje"></div>
                <div id = "4-4" class = "polje"></div>
                <div id = "4-5" class = "polje"></div>
                <div id = "4-6" class = "polje"></div>
                <div id = "4-7" class = "polje"></div>
                <div id = "4-8" class = "polje"></div>
                <div id = "4-9" class = "polje"></div>
                <div id = "4-10" class = "polje"></div>
                <div id = "4-11" class = "polje"></div>
                <div id = "4-12" class = "polje"></div>
                <div id = "4-13" class = "polje"></div>
                <div id = "4-14" class = "polje"></div>
                <div id = "4-15" class = "polje"></div>
                <div id = "4-16" class = "polje"></div>
                <div id = "4-17" class = "polje"></div>
                <div id = "4-18" class = "polje"></div>
                <div id = "4-19" class = "polje"></div>
                <div id = "4-20" class = "polje"></div>
                <div id = "4-21" class = "ivicno_polje"></div>
                <div id = "5-1" class = "polje"></div>
                <div id = "5-2" class = "polje"></div>
                <div id = "5-3" class = "polje"></div>
                <div id = "5-4" class = "polje"></div>
                <div id = "5-5" class = "polje"></div>
                <div id = "5-6" class = "polje"></div>
                <div id = "5-7" class = "polje"></div>
                <div id = "5-8" class = "polje"></div>
                <div id = "5-9" class = "polje"></div>
                <div id = "5-10" class = "polje"></div>
                <div id = "5-11" class = "polje"></div>
                <div id = "5-12" class = "polje"></div>
                <div id = "5-13" class = "polje"></div>
                <div id = "5-14" class = "polje"></div>
                <div id = "5-15" class = "polje"></div>
                <div id = "5-16" class = "polje"></div>
                <div id = "5-17" class = "polje"></div>
                <div id = "5-18" class = "polje"></div>
                <div id = "5-19" class = "polje"></div>
                <div id = "5-20" class = "polje"></div>
                <div id = "5-21" class = "ivicno_polje"></div>
                <div id = "6-1" class = "polje"></div>
                <div id = "6-2" class = "polje"></div>
                <div id = "6-3" class = "polje"></div>
                <div id = "6-4" class = "polje"></div>
                <div id = "6-5" class = "polje"></div>
                <div id = "6-6" class = "polje"></div>
                <div id = "6-7" class = "polje"></div>
                <div id = "6-8" class = "polje"></div>
                <div id = "6-9" class = "polje"></div>
                <div id = "6-10" class = "polje"></div>
                <div id = "6-11" class = "polje"></div>
                <div id = "6-12" class = "polje"></div>
                <div id = "6-13" class = "polje"></div>
                <div id = "6-14" class = "polje"></div>
                <div id = "6-15" class = "polje"></div>
                <div id = "6-16" class = "polje"></div>
                <div id = "6-17" class = "polje"></div>
                <div id = "6-18" class = "polje"></div>
                <div id = "6-19" class = "polje"></div>
                <div id = "6-20" class = "polje"></div>
                <div id = "6-21" class = "ivicno_polje"></div>
                <div id = "7-1" class = "polje"></div>
                <div id = "7-2" class = "polje"></div>
                <div id = "7-3" class = "polje"></div>
                <div id = "7-4" class = "polje"></div>
                <div id = "7-5" class = "polje"></div>
                <div id = "7-6" class = "polje"></div>
                <div id = "7-7" class = "polje"></div>
                <div id = "7-8" class = "polje"></div>
                <div id = "7-9" class = "polje"></div>
                <div id = "7-10" class = "polje"></div>
                <div id = "7-11" class = "polje"></div>
                <div id = "7-12" class = "polje"></div>
                <div id = "7-13" class = "polje"></div>
                <div id = "7-14" class = "polje"></div>
                <div id = "7-15" class = "polje"></div>
                <div id = "7-16" class = "polje"></div>
                <div id = "7-17" class = "polje"></div>
                <div id = "7-18" class = "polje"></div>
                <div id = "7-19" class = "polje"></div>
                <div id = "7-20" class = "polje"></div>
                <div id = "7-21" class = "ivicno_polje"></div>
                <div id = "8-1" class = "polje"></div>
                <div id = "8-2" class = "polje"></div>
                <div id = "8-3" class = "polje"></div>
                <div id = "8-4" class = "polje"></div>
                <div id = "8-5" class = "polje"></div>
                <div id = "8-6" class = "polje"></div>
                <div id = "8-7" class = "polje"></div>
                <div id = "8-8" class = "polje"></div>
                <div id = "8-9" class = "polje"></div>
                <div id = "8-10" class = "polje"></div>
                <div id = "8-11" class = "polje"></div>
                <div id = "8-12" class = "polje"></div>
                <div id = "8-13" class = "polje"></div>
                <div id = "8-14" class = "polje"></div>
                <div id = "8-15" class = "polje"></div>
                <div id = "8-16" class = "polje"></div>
                <div id = "8-17" class = "polje"></div>
                <div id = "8-18" class = "polje"></div>
                <div id = "8-19" class = "polje"></div>
                <div id = "8-20" class = "polje"></div>
                <div id = "8-21" class = "ivicno_polje"></div>
                <div id = "9-1" class = "polje"></div>
                <div id = "9-2" class = "polje"></div>
                <div id = "9-3" class = "polje"></div>
                <div id = "9-4" class = "polje"></div>
                <div id = "9-5" class = "polje"></div>
                <div id = "9-6" class = "polje"></div>
                <div id = "9-7" class = "polje"></div>
                <div id = "9-8" class = "polje"></div>
                <div id = "9-9" class = "polje"></div>
                <div id = "9-10" class = "polje"></div>
                <div id = "9-11" class = "polje"></div>
                <div id = "9-12" class = "polje"></div>
                <div id = "9-13" class = "polje"></div>
                <div id = "9-14" class = "polje"></div>
                <div id = "9-15" class = "polje"></div>
                <div id = "9-16" class = "polje"></div>
                <div id = "9-17" class = "polje"></div>
                <div id = "9-18" class = "polje"></div>
                <div id = "9-19" class = "polje"></div>
                <div id = "9-20" class = "polje"></div>
                <div id = "9-21" class = "ivicno_polje"></div>
                <div id = "10-1" class = "polje"></div>
                <div id = "10-2" class = "polje"></div>
                <div id = "10-3" class = "polje"></div>
                <div id = "10-4" class = "polje"></div>
                <div id = "10-5" class = "polje"></div>
                <div id = "10-6" class = "polje"></div>
                <div id = "10-7" class = "polje"></div>
                <div id = "10-8" class = "polje"></div>
                <div id = "10-9" class = "polje"></div>
                <div id = "10-10" class = "polje"></div>
                <div id = "10-11" class = "polje"></div>
                <div id = "10-12" class = "polje"></div>
                <div id = "10-13" class = "polje"></div>
                <div id = "10-14" class = "polje"></div>
                <div id = "10-15" class = "polje"></div>
                <div id = "10-16" class = "polje"></div>
                <div id = "10-17" class = "polje"></div>
                <div id = "10-18" class = "polje"></div>
                <div id = "10-19" class = "polje"></div>
                <div id = "10-20" class = "polje"></div>
                <div id = "10-21" class = "ivicno_polje"></div>
                <div id = "11-1" class = "polje"></div>
                <div id = "11-2" class = "polje"></div>
                <div id = "11-3" class = "polje"></div>
                <div id = "11-4" class = "polje"></div>
                <div id = "11-5" class = "polje"></div>
                <div id = "11-6" class = "polje"></div>
                <div id = "11-7" class = "polje"></div>
                <div id = "11-8" class = "polje"></div>
                <div id = "11-9" class = "polje"></div>
                <div id = "11-10" class = "polje"></div>
                <div id = "11-11" class = "polje"></div>
                <div id = "11-12" class = "polje"></div>
                <div id = "11-13" class = "polje"></div>
                <div id = "11-14" class = "polje"></div>
                <div id = "11-15" class = "polje"></div>
                <div id = "11-16" class = "polje"></div>
                <div id = "11-17" class = "polje"></div>
                <div id = "11-18" class = "polje"></div>
                <div id = "11-19" class = "polje"></div>
                <div id = "11-20" class = "polje"></div>
                <div id = "11-21" class = "ivicno_polje"></div>
                <div id = "12-1" class = "polje"></div>
                <div id = "12-2" class = "polje"></div>
                <div id = "12-3" class = "polje"></div>
                <div id = "12-4" class = "polje"></div>
                <div id = "12-5" class = "polje"></div>
                <div id = "12-6" class = "polje"></div>
                <div id = "12-7" class = "polje"></div>
                <div id = "12-8" class = "polje"></div>
                <div id = "12-9" class = "polje"></div>
                <div id = "12-10" class = "polje"></div>
                <div id = "12-11" class = "polje"></div>
                <div id = "12-12" class = "polje"></div>
                <div id = "12-13" class = "polje"></div>
                <div id = "12-14" class = "polje"></div>
                <div id = "12-15" class = "polje"></div>
                <div id = "12-16" class = "polje"></div>
                <div id = "12-17" class = "polje"></div>
                <div id = "12-18" class = "polje"></div>
                <div id = "12-19" class = "polje"></div>
                <div id = "12-20" class = "polje"></div>
                <div id = "12-21" class = "ivicno_polje"></div>
                <div id = "13-1" class = "ivicno_polje"></div>
                <div id = "13-2" class = "ivicno_polje"></div>
                <div id = "13-3" class = "ivicno_polje"></div>
                <div id = "13-4" class = "ivicno_polje"></div>
                <div id = "13-5" class = "ivicno_polje"></div>
                <div id = "13-6" class = "ivicno_polje"></div>
                <div id = "13-7" class = "ivicno_polje"></div>
                <div id = "13-8" class = "ivicno_polje"></div>
                <div id = "13-9" class = "ivicno_polje"></div>
                <div id = "13-10" class = "ivicno_polje"></div>
                <div id = "13-11" class = "ivicno_polje"></div>
                <div id = "13-12" class = "ivicno_polje"></div>
                <div id = "13-13" class = "ivicno_polje"></div>
                <div id = "13-14" class = "ivicno_polje"></div>
                <div id = "13-15" class = "ivicno_polje"></div>
                <div id = "13-16" class = "ivicno_polje"></div>
                <div id = "13-17" class = "ivicno_polje"></div>
                <div id = "13-18" class = "ivicno_polje"></div>
                <div id = "13-19" class = "ivicno_polje"></div>
                <div id = "13-20" class = "ivicno_polje"></div>
                <div id = "13-21" class = "ivicno_polje"></div>
                <div id = "14-1" class = "ivicno_polje"></div>
                <div id = "14-2" class = "ivicno_polje"></div>
                <div id = "14-3" class = "ivicno_polje"></div>
                <div id = "14-4" class = "ivicno_polje"></div>
                <div id = "14-5" class = "ivicno_polje"></div>
                <div id = "14-6" class = "ivicno_polje"></div>
                <div id = "14-7" class = "ivicno_polje"></div>
                <div id = "14-8" class = "ivicno_polje"></div>
                <div id = "14-9" class = "ivicno_polje"></div>
                <div id = "14-10" class = "ivicno_polje"></div>
                <div id = "14-11" class = "ivicno_polje"></div>
                <div id = "14-12" class = "ivicno_polje"></div>
                <div id = "14-13" class = "ivicno_polje"></div>
                <div id = "14-14" class = "ivicno_polje"></div>
                <div id = "14-15" class = "ivicno_polje"></div>
                <div id = "14-16" class = "ivicno_polje"></div>
                <div id = "14-17" class = "ivicno_polje"></div>
                <div id = "14-18" class = "ivicno_polje"></div>
                <div id = "14-19" class = "ivicno_polje"></div>
                <div id = "14-20" class = "ivicno_polje"></div>
                <div id = "14-21" class = "ivicno_polje"></div>


                


                
            </div>

            <div id = "kontrole">
                <a href="javascript:;"><div id = "zapocni" onclick = "zapocni()">Započni igru</div></a>
                <div id = "sledeci">
                    <div id = "v1">
                        <div id = "1v1" class = "polje"></div>
                        <div id = "2v1" class = "polje"></div>
                        <div id = "3v1" class = "polje"></div>
                        <div id = "4v1" class = "polje"></div>
                        <div id = "5v1" class = "polje"></div>
                        <div id = "6v1" class = "polje"></div>
                    </div>
                    <div id = "v2">
                        <div id = "1v2" class = "polje0"></div>
                        <div id = "2v2" class = "polje0"></div>
                        <div id = "3v2" class = "polje0"></div>
                        <div id = "4v2" class = "polje0"></div>
                    </div>
                    <div id = "v3">
                        <div id = "1v3" class = "polje1"></div>
                        <div id = "2v3" class = "polje1"></div>
                        <div id = "3v3" class = "polje1"></div>
                        <div id = "4v3" class = "polje1"></div>
                    </div>
                </div>
                <center>
                <div id = "broj_poena">Broj poena: <br> 0</div>
                <div id = "nivo">Nivo: <br> 0</div>
                <a href="javascript:;"><div id = "pauziraj" onclick = "pauziraj()">Pauziraj</div></a>
                <a href="javascript:;"><div id = "nastavi" onclick = "nastavi()">Nastavi</div></a>
                <a href="javascript:;"><div id = "reset" onclick = "restartuj()">Restartuj</div></a>
                <a href="javascript:;"><div id = "nastavi"></div></a>
                
                
            </center>
            </div>
            <center>
            <div id = "strelice">
                <a href="javascript:;"><div  id = "levo" class = "pomeranje" onclick = "levo()">Levo</div></a>
                <a href="javascript:;"><div id = "dole" class = "pomeranje" onclick = "spustanje()">Dole</div></a>
                <a href="javascript:;"><div id = "desno" class = "pomeranje" onclick = "desno()">Desno</div></a>
                <a href="javascript:;"><div id = "okreni" class = "pomeranje" onclick = "okreni()">Okreni</div></a>
            </div>
            </center>

        </div>
        
    </div>
    <div id = "footer">

    </div>

</body>
<script>
    let trenutni = Math.floor(Math.random() * 7);
    let sledeci = Math.floor(Math.random() * 7);
    let broj_poena = 0;
    var obrnuto = 0;

    let funkcija_interval;
    let period;
    let VREME = 400;
    let KORAK = 40;
    let BROJ_PONAVLJANJA_PRE_UBRZAVANJA = 5;

    let element = {};
    let novi_element = {};


    let nije_izgubljeno = 1;

    let pocetno_stanje = document.getElementById("tabla").innerHTML;

    window.addEventListener('keydown', function (parametar) {
    if(document.getElementById("pauziraj").style.display != "none"){
        if(parametar.key == "a"){levo();}
        if(parametar.key == "d"){desno();}
        if(parametar.key == "w"){okreni();}
        if(parametar.key == "s"){spustanje();}
    }
    }, false);


    function zapocni(){
        document.getElementById("zapocni").style.display = "none";
        document.getElementById("sledeci").style.display = "block";
        document.getElementById("broj_poena").style.display = "block";
        document.getElementById("nivo").style.display = "block";
        document.getElementById("pauziraj").style.display = "inline-block";
        document.getElementById("reset").style.display = "inline-block";
        document.getElementById("strelice").style.display = "inline-block";
        document.getElementById("dole").style.display = "inline-block";
        document.getElementById("levo").style.display = "inline-block";
        document.getElementById("okreni").style.display = "inline-block";
        document.getElementById("desno").style.display = "inline-block";
        document.getElementById("kontrole").style.height = "540px";
        generisi_element(trenutni);
        prikazi_sledeci(sledeci);
        period = VREME;
        funkcija_interval = setInterval(spustanje, period);
    }
    function ponovi(){
        trenutni = sledeci;
        sledeci = Math.floor(Math.random() * 7);;
        obrnuto = 0;
        prikazi_sledeci(sledeci);
        generisi_element(trenutni);
        if(nije_izgubljeno){
            funkcija_interval = setInterval(spustanje, period);
        }
        else{
            alert("Izgubili ste!");
        }
    }

    function generisi_element(broj){
        if(broj == 0){
            element = ["7-1", "8-1", "7-2", "8-2"];
        }
        else if(broj == 1){
            element = ["6-2", "7-2", "8-2", "9-2"];
        }
        else if(broj == 2){
            element = ["7-1", "7-2", "8-2", "9-2"];
        }
        else if(broj == 3){
            element = ["9-1", "7-2", "8-2", "9-2"];
        }
        else if(broj == 4){
            element = ["8-1", "9-1", "7-2", "8-2"];
        }
        else if(broj == 5){
            element = ["8-1", "7-2", "8-2", "9-2"];
        }
        else if(broj == 6){
            element = ["7-1", "8-1", "8-2", "9-2"];
        }

        for(let i = 0; i < 4; i++){
            if(document.getElementById(element[i]).className == "popunjeno_polje"){
                nije_izgubljeno = 0;
            }
            else{
                document.getElementById(element[i]).className = "trenutni";
            }
            
        }
    }

    function spustanje(){
        let uslov = 1;
        for(let i = 0; i < 4; i++){
            document.getElementById(element[i]).className = "polje";
            let pom = element[i].split("-");
            
            novi_element[i] = pom[0] + "-" + (Number(pom[1]) + 1).toString()
            if((document.getElementById(novi_element[i]).className == "popunjeno_polje") || (Number(pom[1]) + 1 == 21)){
                uslov = 0;
                break;
            }
        }
        if(uslov == 1){
            
            for(let i = 0; i < 4; i++){
                element[i] = novi_element[i];
                document.getElementById(element[i]).className = "trenutni";
            }
        }
        else{
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "popunjeno_polje";
                
            }
            clearInterval(funkcija_interval);
            obrisi_polja();
            ponovi();

        }
    }

    function pauziraj(){
        clearInterval(funkcija_interval);
        document.getElementById("pauziraj").style.display = "none";
        document.getElementById("nastavi").style.display = "inline-block"
        document.getElementById("strelice").style.display = "none";
        document.getElementById("dole").style.display = "none";
        document.getElementById("levo").style.display = "none";
        document.getElementById("okreni").style.display = "none";
        document.getElementById("desno").style.display = "none";
    }
    function nastavi(){
        funkcija_interval = setInterval(spustanje, period);
        document.getElementById("pauziraj").style.display = "inline-block";
        document.getElementById("nastavi").style.display = "none"
        document.getElementById("strelice").style.display = "inline-block";
        document.getElementById("dole").style.display = "inline-block";
        document.getElementById("levo").style.display = "inline-block";
        document.getElementById("okreni").style.display = "inline-block";
        document.getElementById("desno").style.display = "inline-block";
    }
    function restartuj(){
        document.getElementById("tabla").innerHTML = pocetno_stanje;
        document.getElementById("pauziraj").style.display = "inline-block";
        document.getElementById("nastavi").style.display = "none"
        document.getElementById("strelice").style.display = "inline-block";
        document.getElementById("dole").style.display = "inline-block";
        document.getElementById("levo").style.display = "inline-block";
        document.getElementById("okreni").style.display = "inline-block";
        document.getElementById("desno").style.display = "inline-block";

        clearInterval(funkcija_interval);
        broj_poena = 0;
        period = VREME;
        document.getElementById("nivo").innerHTML = "Nivo: <br> " + (broj_poena/BROJ_PONAVLJANJA_PRE_UBRZAVANJA).toString();
        document.getElementById("broj_poena").innerHTML = "Broj poena: <br> " + broj_poena.toString();
        nije_izgubljeno = 1;
        ponovi();
    }

    function levo(){
        let uslov = 1;
        for(let i = 0; i < 4; i++){
            let pom = element[i].split("-");
            novi_element[i] = (Number(pom[0]) - 1).toString() + "-" + pom[1];
            
            if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                uslov = 0;
            }
        }
        
        if(uslov){
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "polje";
                element[i] = novi_element[i];
            }
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "trenutni";
            }
        }

    }
    function desno(){
        let uslov = 1;
        for(let i = 0; i < 4; i++){
            let pom = element[i].split("-");
            novi_element[i] = (Number(pom[0]) + 1).toString() + "-" + pom[1];
            
            if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                uslov = 0;
            }
        }
        
        if(uslov){
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "polje";
                element[i] = novi_element[i];
                
            }
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "trenutni";

            }
        }

    }

    function okreni(){
        for(let i = 0; i<4; i++){
            novi_element[i] = element[i];
        }
        let uslov;
        switch(trenutni){
            case 0:break;
            case 1:
            if(obrnuto){
                uslov = 1;
                for(let i = 0; i < 4; i++){
                    let pom = element[1].split("-");
                    novi_element[i] = (Number(pom[0]) + i - 1).toString() + "-" + pom[1];
                    if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                        uslov = 0;
                    }
                }
                
                zamena_mesta(uslov);
                obrnuto = 0;
            }
            else{
                uslov = 1;
                for(let i = 0; i < 4; i++){
                    let pom = element[1].split("-");
                    novi_element[i] = pom[0] + "-" + (Number(pom[1]) + i - 1).toString();
                    
                    if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                        uslov = 0;
                    }
                }
                zamena_mesta(uslov);
                obrnuto = 1;
            }

            break;
            case 2:
                uslov = 1;
                for(let i = 0; i < 4; i++){
                    let pom = element[2].split("-");
                    let x = element[i].split("-");
                    okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                    
                    if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                        uslov = 0;
                    }
                }
                zamena_mesta(uslov);
                break;

            case 3:
                uslov = 1;
                for(let i = 0; i < 4; i++){
                    let pom = element[2].split("-");
                    let x = element[i].split("-");
                    okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                    
                    if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                        uslov = 0;
                    }
                }
                zamena_mesta(uslov);
                break;
            
            case 4://["8-1", "9-1", "7-2", "8-2"];
                if(obrnuto){
                    uslov = 1;
                    
                    for(let i = 0; i < 4; i++){

                        let pom = element[0].split("-");
                        let x = element[i].split("-");
                        okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                        
                        if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                            uslov = 0;
                        }
                    }
                    zamena_mesta(uslov);
                    obrnuto = 0;
                }
                else{
                    uslov = 1;
                    for(let i = 0; i < 4; i++){
                        let pom = element[0].split("-");
                        let x = element[i].split("-");
                        okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                        
                        if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                            uslov = 0;
                        }
                    }
                    zamena_mesta(uslov);
                    obrnuto = 1
                }
                break;

            case 5:

                uslov = 1;
                for(let i = 0; i < 4; i++){
                    let pom = element[2].split("-");
                    let x = element[i].split("-");
                    okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                    
                    if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                        uslov = 0;
                    }
                }
                zamena_mesta(uslov);
                break;

            case 6: //["7-1", "8-1", "8-2", "9-2"];
                if(obrnuto){
                    
                    uslov = 1;
                    for(let i = 0; i < 4; i++){

                        let pom = element[1].split("-");
                        let x = element[i].split("-");
                        okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                        
                        if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                            uslov = 0;
                        }
                    }
                    zamena_mesta(uslov);
                    obrnuto = 0;
                }
                else{
                    uslov = 1;
                    for(let i = 0; i < 4; i++){
                        let pom = element[1].split("-");
                        let x = element[i].split("-");
                        okretanje_sim_elem(i, (Number(pom[0]) - Number(x[0])).toString() + "-" + (Number(pom[1]) - Number(x[1])).toString(), novi_element, pom);
                        
                        if((document.getElementById(novi_element[i]).className == "popunjeno_polje")||(document.getElementById(novi_element[i]).className == "ivicno_polje")){
                            uslov = 0;
                        }
                    }
                    zamena_mesta(uslov);
                    obrnuto = 1
                }
                break;
        }

    }
    function zamena_mesta(condition){
        if(condition){
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "polje";
                element[i] = novi_element[i];
            }
            for(let i = 0; i < 4; i++){
                document.getElementById(element[i]).className = "trenutni";

            }
        }
    }

    function okretanje_sim_elem(brojac, indeks, potencijalni_element, pomocni_niz){
        if(indeks == "1-1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) + 1).toString() + "-" + (Number(pomocni_niz[1]) - 1).toString();
        }
        if(indeks == "0-1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) + 1).toString() + "-" + pomocni_niz[1];
        }
        if(indeks == "-1-1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) + 1).toString() + "-" + (Number(pomocni_niz[1]) + 1).toString();
        }
        if(indeks == "-1-0"){
            potencijalni_element[brojac] = pomocni_niz[0] + "-" + (Number(pomocni_niz[1]) + 1 ).toString();
        }
        if(indeks == "-1--1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) - 1).toString() + "-" + (Number(pomocni_niz[1]) + 1).toString();
        }
        if(indeks == "0--1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) - 1).toString() + "-" + pomocni_niz[1];
        }
        if(indeks == "1--1"){
            potencijalni_element[brojac] = (Number(pomocni_niz[0]) - 1).toString() + "-" + (Number(pomocni_niz[1]) - 1).toString();
        }
        if(indeks == "1-0"){
            potencijalni_element[brojac] = pomocni_niz[0] + "-" + (Number(pomocni_niz[1]) - 1).toString();
        }
        
    }

    function obrisi_polja(){
        for(let i = 0; i < 4; i++){
            let pom = element[i].split("-");
            
            let brojac = 0;
            for( let j = 3; j < 13; j++){
                if(document.getElementById( j.toString() + "-" + pom[1]).className == "popunjeno_polje"){
                    brojac++;
                }
            }
            if(brojac == 10){
                
                for( let j = 3; j < 13; j++){
                    document.getElementById( j.toString() + "-" + pom[1]).className = "polje";
                    let pom_broj = Number(pom[1]);
                    while(pom_broj - 1 > 0){
                        document.getElementById( j.toString() + "-" + pom_broj.toString()).className = document.getElementById( j.toString() + "-" + (pom_broj - 1).toString()).className
                        pom_broj--;
                    }
                    document.getElementById( j.toString() + "-" + (pom_broj).toString()).className = "polje";
                }
                for (let l = i; l < 4; l++){
                    let provera = element[l].split("-");
                    if(Number(provera[1]) < Number(pom[1])){
                        element[l] = provera[0] + "-" + (Number(provera[1]) + 1).toString();
                    }
                    
                }
                broj_poena++;
                if(broj_poena % BROJ_PONAVLJANJA_PRE_UBRZAVANJA == 0){
                    document.getElementById("nivo").innerHTML = "Nivo: <br> " + (broj_poena/BROJ_PONAVLJANJA_PRE_UBRZAVANJA).toString();
                    period -= KORAK;
                }
                document.getElementById("broj_poena").innerHTML = "Broj poena: <br> " + broj_poena.toString();
            }
        }
    }


    function prikazi_sledeci(){
        switch(sledeci){
            case 0: 
            document.getElementById("v1").style.display = "none";
            document.getElementById("v2").style.display = "flex";
            document.getElementById("v3").style.display = "none";
            break;
            case 1:
            document.getElementById("v1").style.display = "none";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "flex";
            break;
            case 2: 
            document.getElementById("v1").style.display = "flex";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "none";
            document.getElementById("1v1").className = "polje2";
            document.getElementById("2v1").className = "polje2";
            document.getElementById("3v1").className = "skriveno_polje";
            document.getElementById("4v1").className = "polje2";
            document.getElementById("5v1").className = "skriveno_polje";
            document.getElementById("6v1").className = "polje2";
            break;
            case 3: 
            document.getElementById("v1").style.display = "flex";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "none";
            document.getElementById("1v1").className = "skriveno_polje";
            document.getElementById("2v1").className = "polje3";
            document.getElementById("3v1").className = "skriveno_polje";
            document.getElementById("4v1").className = "polje3";
            document.getElementById("5v1").className = "polje3";
            document.getElementById("6v1").className = "polje3";
            break;
            case 4: 
            document.getElementById("v1").style.display = "flex";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "none";
            document.getElementById("1v1").className = "skriveno_polje";
            document.getElementById("2v1").className = "polje4";
            document.getElementById("3v1").className = "polje4";
            document.getElementById("4v1").className = "polje4";
            document.getElementById("5v1").className = "polje4";
            document.getElementById("6v1").className = "skriveno_polje";
            break;
            case 5: 
            document.getElementById("v1").style.display = "flex";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "none";
            document.getElementById("1v1").className = "skriveno_polje";
            document.getElementById("2v1").className = "polje5";
            document.getElementById("3v1").className = "polje5";
            document.getElementById("4v1").className = "polje5";
            document.getElementById("5v1").className = "skriveno_polje";
            document.getElementById("6v1").className = "polje5";
            break;
            case 6: 
            document.getElementById("v1").style.display = "flex";
            document.getElementById("v2").style.display = "none";
            document.getElementById("v3").style.display = "none";
            document.getElementById("1v1").className = "polje6";
            document.getElementById("2v1").className = "skriveno_polje";
            document.getElementById("3v1").className = "polje6";
            document.getElementById("4v1").className = "polje6";
            document.getElementById("5v1").className = "skriveno_polje";
            document.getElementById("6v1").className = "polje6";
            break;
        }
    }
</script>
</html>
